<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UI修复测试</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="main-container">
        <!-- 顶部导航栏 -->
        <header class="header">
            <div class="header-left">
                <h1>中药多组分均化分析客户端</h1>
            </div>
            <div class="header-right">
                <span class="user-info">admin (管理员)</span>
                <button class="btn-secondary">退出登录</button>
            </div>
        </header>

        <!-- 导航菜单 -->
        <nav class="nav-menu">
            <button class="nav-btn active" data-tab="home">首页</button>
            <button class="nav-btn" data-tab="regression">符号回归</button>
            <button class="nav-btn" data-tab="monte-carlo">蒙特卡罗分析</button>
            <button class="nav-btn admin-only show" data-tab="data-management">数据管理</button>
            <button class="nav-btn admin-only show" data-tab="user-management">用户管理</button>
            <button class="nav-btn" data-tab="settings">设置</button>
        </nav>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <!-- 符号回归分析 -->
            <div id="regression" class="tab-content active">
                <h2>符号回归分析</h2>
                <div class="analysis-section">
                    <div class="input-section">
                        <h3>数据输入</h3>
                        <div class="form-group">
                            <label for="regression-data">选择数据文件</label>
                            <input type="file" id="regression-data" accept=".csv,.xlsx,.xls">
                        </div>
                        <div class="form-group">
                            <label for="target-column">目标变量</label>
                            <select id="target-column">
                                <option value="">请先上传数据</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>特征变量</label>
                            <div id="feature-columns" class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="feature1" value="feature1">
                                    <label for="feature1">特征1</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="feature2" value="feature2">
                                    <label for="feature2">特征2</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="population-size">种群大小</label>
                            <input type="number" id="population-size" value="100" min="10" max="1000">
                        </div>
                        <div class="form-group">
                            <label for="generations">代数</label>
                            <input type="number" id="generations" value="50" min="10" max="500">
                        </div>
                        <button id="start-regression-btn" class="btn-primary">开始分析</button>
                    </div>
                    <div class="result-section">
                        <h3>分析结果</h3>
                        <div id="regression-results" class="results-container">
                            <p>请先进行分析</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 蒙特卡罗分析 -->
            <div id="monte-carlo" class="tab-content">
                <h2>蒙特卡罗分析</h2>
                <div class="analysis-section">
                    <div class="input-section">
                        <h3>分析参数</h3>
                        <div class="form-group">
                            <label for="mc-model">选择回归模型</label>
                            <select id="mc-model">
                                <option value="">请先完成符号回归分析</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="mc-iterations">模拟次数</label>
                            <input type="number" id="mc-iterations" value="1000" min="100" max="10000">
                        </div>
                        <div class="form-group">
                            <label for="target-efficacy">目标药效值</label>
                            <input type="number" id="target-efficacy" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="tolerance">容差</label>
                            <input type="number" id="tolerance" value="0.1" step="0.01" min="0.01" max="1">
                        </div>
                        <button id="start-monte-carlo-btn" class="btn-primary">开始分析</button>
                    </div>
                    <div class="result-section">
                        <h3>分析结果</h3>
                        <div id="monte-carlo-results" class="results-container">
                            <p>请先进行分析</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 数据管理 -->
            <div id="data-management" class="tab-content">
                <h2>数据管理</h2>
                <div class="data-section">
                    <div class="data-actions">
                        <h3>数据操作</h3>
                        <button class="btn-primary">导入数据</button>
                        <button class="btn-secondary">导出数据</button>
                        <button class="btn-danger">清空数据</button>
                    </div>
                    <div class="data-table">
                        <p>暂无数据</p>
                    </div>
                </div>
            </div>

            <!-- 用户管理 -->
            <div id="user-management" class="tab-content">
                <h2>用户管理</h2>
                <div class="user-section">
                    <div class="user-actions">
                        <h3>用户操作</h3>
                        <button class="btn-primary">添加用户</button>
                        <button class="btn-secondary">刷新列表</button>
                    </div>
                    <div class="data-table">
                        <p>加载中...</p>
                    </div>
                </div>
            </div>

            <!-- 设置 -->
            <div id="settings" class="tab-content">
                <h2>系统设置</h2>
                <div class="settings-section">
                    <div class="form-group">
                        <label for="backend-port">后端端口</label>
                        <input type="number" id="backend-port" value="5000" min="1000" max="9999">
                    </div>
                    <div class="form-group">
                        <label for="auto-start-backend">
                            <input type="checkbox" id="auto-start-backend" checked>
                            自动启动后端服务
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="theme">主题</label>
                        <select id="theme">
                            <option value="dark">深色</option>
                            <option value="light">浅色</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="language">语言</label>
                        <select id="language">
                            <option value="zh-CN">中文</option>
                            <option value="en-US">English</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="default-format">默认格式</label>
                        <select id="default-format">
                            <option value="csv">CSV</option>
                            <option value="xlsx">Excel</option>
                            <option value="json">JSON</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="auto-save">
                            <input type="checkbox" id="auto-save">
                            自动保存
                        </label>
                    </div>
                    <button id="save-settings" class="btn-primary">保存设置</button>
                </div>
            </div>
        </main>

        <!-- 状态栏 -->
        <footer class="status-bar">
            <div class="status-left">
                <span id="connection-status-footer">后端服务：已连接</span>
            </div>
            <div class="status-right">
                <span id="current-time">2025-08-03 20:30:00</span>
            </div>
        </footer>
    </div>

    <!-- 加载遮罩 -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loading-text">正在处理...</p>
        </div>
    </div>

    <!-- 通知容器 -->
    <div id="notification-container" class="notification-container"></div>

    <script>
        // 简单的测试脚本
        document.addEventListener('DOMContentLoaded', function() {
            // 更新状态栏时间
            function updateTime() {
                const timeElement = document.getElementById('current-time');
                if (timeElement) {
                    timeElement.textContent = new Date().toLocaleString('zh-CN');
                }
            }
            updateTime();
            setInterval(updateTime, 1000);

            // 测试按钮点击
            const startRegressionBtn = document.getElementById('start-regression-btn');
            if (startRegressionBtn) {
                startRegressionBtn.addEventListener('click', function() {
                    alert('开始分析按钮已修复！');
                });
            }

            const startMonteCarloBtn = document.getElementById('start-monte-carlo-btn');
            if (startMonteCarloBtn) {
                startMonteCarloBtn.addEventListener('click', function() {
                    alert('蒙特卡罗分析按钮已修复！');
                });
            }

            // 测试通知
            setTimeout(() => {
                showNotification('UI修复测试完成！', 'success');
            }, 1000);
        });

        // 简单的通知函数
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notification-container');
            if (!container) return;

            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            container.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>
</body>
</html> 