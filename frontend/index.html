<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中药多组分均化分析客户端</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div id="app">
        <!-- 顶部导航栏 -->
        <header class="header">
            <div class="logo">
                <h1>中药多组分均化分析</h1>
            </div>
            <nav class="nav">
                <button class="nav-btn active" data-tab="home">首页</button>
                <button class="nav-btn" data-tab="regression">符号回归</button>
                <button class="nav-btn" data-tab="monte-carlo">蒙特卡罗分析</button>
                <button class="nav-btn" data-tab="settings">设置</button>
            </nav>
        </header>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <!-- 首页 -->
            <div id="home" class="tab-content active">
                <div class="welcome-section">
                    <h2>欢迎使用中药多组分均化分析客户端</h2>
                    <p>本软件旨在协助药企和科研人员优化中药配方、保证效用一致性</p>
                </div>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h3>符号回归</h3>
                        <p>通过遗传编程自动回归出数学表达式，提供可视化的公式树图和拟合曲线</p>
                        <button class="btn-primary" onclick="switchTab('regression')">开始分析</button>
                    </div>
                    
                    <div class="feature-card">
                        <h3>蒙特卡罗分析</h3>
                        <p>基于回归模型和药典标准，通过蒙特卡罗模拟确定药物配比的合理区间</p>
                        <button class="btn-primary" onclick="switchTab('monte-carlo')">开始分析</button>
                    </div>
                    
                    <div class="feature-card">
                        <h3>数据管理</h3>
                        <p>支持多种格式的数据导入导出，方便管理和分析实验数据</p>
                        <button class="btn-secondary" onclick="importData()">导入数据</button>
                    </div>
                    
                    <div class="feature-card">
                        <h3>结果导出</h3>
                        <p>生成详细的分析报告，包含图表、数据和结论，支持多种格式导出</p>
                        <button class="btn-secondary" onclick="exportResults()">导出结果</button>
                    </div>
                </div>
            </div>

            <!-- 符号回归页面 -->
            <div id="regression" class="tab-content">
                <div class="page-header">
                    <h2>符号回归分析</h2>
                    <p>通过遗传编程算法自动发现数据中的数学关系</p>
                </div>
                
                <div class="analysis-container">
                    <div class="input-section">
                        <h3>数据输入</h3>
                        <div class="form-group">
                            <label for="regression-data">选择数据文件：</label>
                            <input type="file" id="regression-data" accept=".csv,.xlsx,.json">
                        </div>
                        
                        <div class="form-group">
                            <label for="target-column">目标变量列：</label>
                            <select id="target-column">
                                <option value="">请先选择数据文件</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="feature-columns">特征变量列：</label>
                            <div id="feature-columns" class="checkbox-group">
                                <!-- 动态生成复选框 -->
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="population-size">种群大小：</label>
                            <input type="number" id="population-size" value="100" min="10" max="1000">
                        </div>
                        
                        <div class="form-group">
                            <label for="generations">进化代数：</label>
                            <input type="number" id="generations" value="50" min="10" max="500">
                        </div>
                        
                        <button class="btn-primary" onclick="startRegression()">开始回归</button>
                    </div>
                    
                    <div class="result-section">
                        <h3>分析结果</h3>
                        <div id="regression-results">
                            <p class="placeholder">请先运行分析以查看结果</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 蒙特卡罗分析页面 -->
            <div id="monte-carlo" class="tab-content">
                <div class="page-header">
                    <h2>蒙特卡罗配比分析</h2>
                    <p>基于符号回归模型进行蒙特卡罗模拟，确定最优配比区间</p>
                </div>
                
                <div class="analysis-container">
                    <div class="input-section">
                        <h3>分析参数</h3>
                        <div class="form-group">
                            <label for="mc-model">选择回归模型：</label>
                            <select id="mc-model">
                                <option value="">请先完成符号回归分析</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="target-efficacy">目标药效值：</label>
                            <input type="number" id="target-efficacy" step="0.01" min="0" max="1">
                        </div>
                        
                        <div class="form-group">
                            <label for="mc-iterations">模拟次数：</label>
                            <input type="number" id="mc-iterations" value="10000" min="1000" max="100000">
                        </div>
                        
                        <div class="form-group">
                            <label for="tolerance">容差范围：</label>
                            <input type="number" id="tolerance" value="0.1" step="0.01" min="0.01" max="0.5">
                        </div>
                        
                        <button class="btn-primary" onclick="startMonteCarlo()">开始分析</button>
                    </div>
                    
                    <div class="result-section">
                        <h3>分析结果</h3>
                        <div id="monte-carlo-results">
                            <p class="placeholder">请先运行分析以查看结果</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 设置页面 -->
            <div id="settings" class="tab-content">
                <div class="page-header">
                    <h2>系统设置</h2>
                    <p>配置应用参数和偏好设置</p>
                </div>
                
                <div class="settings-container">
                    <div class="setting-group">
                        <h3>后端服务</h3>
                        <div class="form-group">
                            <label for="backendPort">服务端口：</label>
                            <input type="number" id="backendPort" value="5000" min="1024" max="65535">
                        </div>
                        
                        <div class="form-group">
                            <label for="autoStartBackend">自动启动后端：</label>
                            <input type="checkbox" id="autoStartBackend" checked>
                        </div>
                        
                        <button class="btn-secondary" onclick="testBackendConnection()">测试连接</button>
                    </div>
                    
                    <div class="setting-group">
                        <h3>界面设置</h3>
                        <div class="form-group">
                            <label for="theme">主题：</label>
                            <select id="theme">
                                <option value="dark">深色主题</option>
                                <option value="light">浅色主题</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="language">语言：</label>
                            <select id="language">
                                <option value="zh-CN">中文</option>
                                <option value="en-US">English</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h3>数据设置</h3>
                        <div class="form-group">
                            <label for="defaultFormat">默认导出格式：</label>
                            <select id="defaultFormat">
                                <option value="csv">CSV</option>
                                <option value="json">JSON</option>
                                <option value="excel">Excel</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="autoSave">自动保存：</label>
                            <input type="checkbox" id="autoSave">
                        </div>
                    </div>
                    
                    <button class="btn-primary" onclick="saveSettings()">保存设置</button>
                </div>
            </div>
        </main>

        <!-- 状态栏 -->
        <footer class="status-bar">
            <div class="status-left">
                <span id="connection-status">后端服务：未连接</span>
            </div>
            <div class="status-right">
                <span id="status-bar">就绪</span>
            </div>
        </footer>
    </div>

    <!-- 加载指示器 -->
    <div id="loading" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p class="loading-text">正在处理...</p>
    </div>

    <script src="scripts/renderer.js"></script>
</body>
</html> 