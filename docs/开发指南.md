# ä¸­è¯å¤šç»„åˆ†å‡åŒ–åˆ†æå®¢æˆ·ç«¯ - å¼€å‘æŒ‡å—

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº Electron + Python çš„è·¨å¹³å°æ¡Œé¢åº”ç”¨ï¼Œç”¨äºä¸­è¯å¤šç»„åˆ†å‡åŒ–åˆ†æã€‚é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå‰ç«¯ä½¿ç”¨ Electron æ„å»ºç”¨æˆ·ç•Œé¢ï¼Œåç«¯ä½¿ç”¨ Python å®ç°ç®—æ³•é€»è¾‘ã€‚

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Electron**: è·¨å¹³å°æ¡Œé¢åº”ç”¨æ¡†æ¶
- **HTML/CSS/JavaScript**: å‰ç«¯ç•Œé¢å¼€å‘
- **Node.js**: JavaScript è¿è¡Œæ—¶ç¯å¢ƒ

### åç«¯
- **Python 3.10+**: ä¸»è¦ç¼–ç¨‹è¯­è¨€
- **Flask**: Web æ¡†æ¶
- **NumPy/SciPy**: ç§‘å­¦è®¡ç®—
- **Pandas**: æ•°æ®å¤„ç†
- **PySR/gplearn**: ç¬¦å·å›å½’ç®—æ³•

## é¡¹ç›®ç»“æ„

```
tcm-homogenizer/
â”œâ”€â”€ frontend/              # Electron å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ main.js           # ä¸»è¿›ç¨‹æ–‡ä»¶
â”‚   â”œâ”€â”€ preload.js        # é¢„åŠ è½½è„šæœ¬
â”‚   â”œâ”€â”€ index.html        # ä¸»ç•Œé¢
â”‚   â”œâ”€â”€ styles/           # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ scripts/          # æ¸²æŸ“è¿›ç¨‹è„šæœ¬
â”‚   â””â”€â”€ package.json      # é¡¹ç›®é…ç½®
â”œâ”€â”€ backend/              # Python åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ main.py           # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ api/              # API æ¥å£
â”‚   â”œâ”€â”€ algorithms/       # ç®—æ³•å®ç°
â”‚   â”œâ”€â”€ utils/            # å·¥å…·æ¨¡å—
â”‚   â””â”€â”€ requirements.txt  # Python ä¾èµ–
â”œâ”€â”€ docs/                 # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ scripts/              # è‡ªåŠ¨åŒ–è„šæœ¬
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ç½®è¦æ±‚
- Node.js 18.20.8+ (LTS/Hydrogen)
- Python 3.10+
- Git

### å¿«é€Ÿå¼€å§‹

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd tcm-homogenizer
   ```

2. **è®¾ç½®å¼€å‘ç¯å¢ƒ**
   ```bash
   ./scripts/setup-dev.sh
   ```

3. **å¯åŠ¨å¼€å‘ç¯å¢ƒ**
   ```bash
   ./scripts/start-dev.sh
   ```

## å¼€å‘è§„èŒƒ

### Git æäº¤è§„èŒƒ

æœ¬é¡¹ç›®ä½¿ç”¨ **Conventional Commits** è§„èŒƒå’Œ **Gitmoji**ï¼š

- ğŸ‰ `feat:` æ–°åŠŸèƒ½
- ğŸ› `fix:` ä¿®å¤bug
- ğŸ“ `docs:` æ–‡æ¡£æ›´æ–°
- ğŸ¨ `style:` ä»£ç æ ¼å¼è°ƒæ•´
- â™»ï¸ `refactor:` ä»£ç é‡æ„
- âš¡ `perf:` æ€§èƒ½ä¼˜åŒ–
- âœ… `test:` æµ‹è¯•ç›¸å…³
- ğŸ”§ `chore:` æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

### åˆ†æ”¯ç®¡ç†

- `main`: ä¸»åˆ†æ”¯ï¼Œå­˜æ”¾ç¨³å®šä»£ç 
- `develop`: å¼€å‘åˆ†æ”¯ï¼Œç”¨äºæ—¥å¸¸å¼€å‘
- `feature/*`: åŠŸèƒ½åˆ†æ”¯
- `hotfix/*`: ç´§æ€¥ä¿®å¤åˆ†æ”¯

### ä»£ç é£æ ¼

#### Python
- ä½¿ç”¨ Black è¿›è¡Œä»£ç æ ¼å¼åŒ–
- éµå¾ª PEP 8 è§„èŒƒ
- ä½¿ç”¨ç±»å‹æ³¨è§£
- ç¼–å†™è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²

#### JavaScript
- ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥
- éµå¾ª Airbnb JavaScript è§„èŒƒ
- ä½¿ç”¨ ES6+ è¯­æ³•

## å¼€å‘æµç¨‹

### 1. åŠŸèƒ½å¼€å‘

1. ä» `develop` åˆ†æ”¯åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
   ```bash
   git checkout develop
   git pull origin develop
   git checkout -b feature/your-feature-name
   ```

2. å¼€å‘åŠŸèƒ½å¹¶æäº¤
   ```bash
   git add .
   git commit -m "ğŸ‰ feat: æ·»åŠ æ–°åŠŸèƒ½æè¿°"
   ```

3. æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯
   ```bash
   git push origin feature/your-feature-name
   ```

4. åˆ›å»º Pull Request åˆ° `develop` åˆ†æ”¯

### 2. æµ‹è¯•

- è¿è¡Œå•å…ƒæµ‹è¯•
- è¿›è¡Œé›†æˆæµ‹è¯•
- æ‰‹åŠ¨æµ‹è¯•åŠŸèƒ½

### 3. ä»£ç å®¡æŸ¥

- ä»£ç å®¡æŸ¥é€šè¿‡ååˆå¹¶åˆ° `develop` åˆ†æ”¯
- å®šæœŸå°† `develop` åˆ†æ”¯åˆå¹¶åˆ° `main` åˆ†æ”¯

## API å¼€å‘

### åç«¯ API ç»“æ„

```python
# ç¬¦å·å›å½’ API
POST /api/regression/analyze
GET /api/regression/models
GET /api/regression/models/<model_id>

# è’™ç‰¹å¡æ´›é‡‡æ ·åˆ†æ API
POST /api/monte-carlo-sampling/analyze
GET /api/monte-carlo-sampling/results/<analysis_id>

# æ•°æ®å¤„ç† API
POST /api/data/upload
POST /api/data/validate
POST /api/data/preview
```

### æ·»åŠ æ–°çš„ API ç«¯ç‚¹

1. åœ¨ `backend/api/routes.py` ä¸­å®šä¹‰è·¯ç”±
2. åœ¨å¯¹åº”çš„ç®—æ³•æ¨¡å—ä¸­å®ç°ä¸šåŠ¡é€»è¾‘
3. æ·»åŠ é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
4. ç¼–å†™å•å…ƒæµ‹è¯•

## å‰ç«¯å¼€å‘

### ç•Œé¢ç»“æ„

- ä¸»ç•Œé¢ (`index.html`): åº”ç”¨çš„ä¸»è¦ç•Œé¢
- æ ·å¼æ–‡ä»¶ (`styles/main.css`): æ·±è‰²ä¸»é¢˜æ ·å¼
- è„šæœ¬æ–‡ä»¶ (`scripts/renderer.js`): ç•Œé¢äº¤äº’é€»è¾‘

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ HTML ä¸­æ·»åŠ ç•Œé¢å…ƒç´ 
2. åœ¨ CSS ä¸­æ·»åŠ æ ·å¼
3. åœ¨ JavaScript ä¸­æ·»åŠ äº¤äº’é€»è¾‘
4. åœ¨ä¸»è¿›ç¨‹ä¸­æ·»åŠ å¿…è¦çš„ IPC é€šä¿¡

## ç®—æ³•å¼€å‘

### ç¬¦å·å›å½’ç®—æ³•

ä½ç½®: `backend/algorithms/symbolic_regression.py`

ä¸»è¦åŠŸèƒ½:
- æ•°æ®é¢„å¤„ç†
- ç¬¦å·å›å½’æ¨¡å‹è®­ç»ƒ
- æ¨¡å‹è¯„ä¼°å’Œä¿å­˜
- é¢„æµ‹åŠŸèƒ½

### è’™ç‰¹å¡æ´›é‡‡æ ·åˆ†æç®—æ³•

ä½ç½®: `backend/algorithms/monte_carlo.py`

ä¸»è¦åŠŸèƒ½:
- åŸºäºå›å½’æ¨¡å‹è¿›è¡Œéšæœºé‡‡æ ·
- è®¡ç®—æœ€ä¼˜é…æ¯”åŒºé—´
- ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š

## æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# Python æµ‹è¯•
cd backend
python -m pytest

# å‰ç«¯æµ‹è¯• (å¾…å®ç°)
cd frontend
npm test
```

### æµ‹è¯•è¦†ç›–ç‡

```bash
# Python æµ‹è¯•è¦†ç›–ç‡
cd backend
python -m pytest --cov=.
```

## æ„å»ºå’Œéƒ¨ç½²

### å¼€å‘æ„å»º

```bash
# å‰ç«¯æ„å»º
cd frontend
npm run build

# åç«¯æ„å»º
cd backend
python setup.py build
```

### ç”Ÿäº§æ„å»º

```bash
# ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬
./scripts/build.sh
```

## è°ƒè¯•

### å‰ç«¯è°ƒè¯•

1. å¯åŠ¨å¼€å‘æ¨¡å¼
   ```bash
   cd frontend
   NODE_ENV=development npm start
   ```

2. ä½¿ç”¨ Electron å¼€å‘è€…å·¥å…·

### åç«¯è°ƒè¯•

1. å¯åŠ¨ Flask è°ƒè¯•æ¨¡å¼
   ```bash
   cd backend
   python main.py
   ```

2. ä½¿ç”¨ Python è°ƒè¯•å™¨
   ```python
   import pdb; pdb.set_trace()
   ```

## å¸¸è§é—®é¢˜

### 1. Electron åº”ç”¨æ— æ³•å¯åŠ¨

- æ£€æŸ¥ Node.js ç‰ˆæœ¬
- ç¡®è®¤ä¾èµ–å®‰è£…å®Œæ•´
- æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### 2. Python åç«¯å¯åŠ¨å¤±è´¥

- æ£€æŸ¥ Python ç‰ˆæœ¬
- ç¡®è®¤è™šæ‹Ÿç¯å¢ƒæ¿€æ´»
- æ£€æŸ¥ä¾èµ–å®‰è£…

### 3. å‰åç«¯é€šä¿¡å¤±è´¥

- æ£€æŸ¥ç«¯å£é…ç½®
- ç¡®è®¤ CORS è®¾ç½®
- æŸ¥çœ‹ç½‘ç»œè¿æ¥

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- GitHub Issues
- é¡¹ç›®è®¨è®ºåŒº
- é‚®ä»¶è”ç³»

---

**æ³¨æ„**: æœ¬å¼€å‘æŒ‡å—ä¼šéšç€é¡¹ç›®å‘å±•æŒç»­æ›´æ–°ï¼Œè¯·å®šæœŸæŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚ 